# CAPTCHA-automatic-recognitionï¼ˆAIéªŒè¯ç è‡ªåŠ¨è¯†åˆ«å¡«å……ï¼‰

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

CAPTCHA-automatic-recognition æ˜¯ä¸€ä¸ªåŸºäºæ²¹çŒ´è„šæœ¬ï¼ˆUserScriptï¼‰çš„æ™ºèƒ½éªŒè¯ç è¯†åˆ«å·¥å…·ï¼Œé€šè¿‡é›†æˆä¸»æµ AI è§†è§‰æ¨¡å‹æœåŠ¡ï¼Œå®ç°ç½‘é¡µéªŒè¯ç çš„è‡ªåŠ¨è¯†åˆ«å’Œå¡«å……åŠŸèƒ½ã€‚é¡¹ç›®ä½¿ç”¨ Vue 3 + Vite æ„å»ºï¼Œæ”¯æŒ OpenAIã€Google Geminiã€é˜¿é‡Œäº‘é€šä¹‰åƒé—®ç­‰å¤šä¸ª AI æœåŠ¡å•†ã€‚

### ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šAIæœåŠ¡å•†æ”¯æŒ** - OpenAIã€Geminiã€é€šä¹‰åƒé—®
- ğŸ¯ **æ™ºèƒ½è¯†åˆ«** - æ”¯æŒå­—ç¬¦è¯†åˆ«å’Œæ•°å­¦è®¡ç®—é¢˜
- ğŸ”„ **è‡ªåŠ¨åŒ–å¤„ç†** - è‡ªåŠ¨æ£€æµ‹ã€è¯†åˆ«ã€å¡«å……éªŒè¯ç 
- ğŸ“¦ **äº‘ç«¯è§„åˆ™** - æ”¯æŒè¿œç¨‹è§„åˆ™é…ç½®ï¼Œè‡ªåŠ¨é€‚é…å„ç½‘ç«™
- ğŸ¨ **å‹å¥½ç•Œé¢** - ç°ä»£åŒ–è®¾ç½®é¢æ¿ï¼Œæ“ä½œç®€å•ç›´è§‚
- ğŸ”§ **é«˜åº¦å¯å®šåˆ¶** - æ”¯æŒè‡ªå®šä¹‰é€‰æ‹©å™¨å’Œé«˜çº§é…ç½®

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Vue | 3.4.27 | å‰ç«¯æ¡†æ¶ |
| Vite | 5.2.12 | æ„å»ºå·¥å…· |
| vite-plugin-monkey | 4.0.0 | æ²¹çŒ´è„šæœ¬æ‰“åŒ…æ’ä»¶ |
| Less | 4.1.0 | CSSé¢„å¤„ç†å™¨ |
| Axios | 1.6.2 | HTTPè¯·æ±‚åº“ |

### é¡¹ç›®ç»“æ„

```
CAPTCHA-automatic-recognition/
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.js                # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ app.vue                # æ ¸å¿ƒç»„ä»¶ï¼ˆ2765è¡Œï¼‰
â”‚   â””â”€â”€ assets/                # èµ„æºæ–‡ä»¶
â”‚       â”œâ”€â”€ app.less           # æ ·å¼æ–‡ä»¶ï¼ˆ763è¡Œï¼‰
â”‚       â”œâ”€â”€ prompts.js         # AIæç¤ºè¯é…ç½®
â”‚       â””â”€â”€ logo.png           # é¡¹ç›®å›¾æ ‡
â”œâ”€â”€ docs/                      # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ advanced-settings.md  # é«˜çº§è®¾ç½®ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ rules.json                 # éªŒè¯ç è¯†åˆ«è§„åˆ™é…ç½®
â”œâ”€â”€ vite.config.js            # Viteæ„å»ºé…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ version-log.md            # ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
â””â”€â”€ index.html                # å¼€å‘æµ‹è¯•é¡µé¢
```

## ğŸš€ åŠŸèƒ½è¯¦è§£

### 1. éªŒè¯ç æ£€æµ‹ç³»ç»Ÿ

#### å¤šé‡é€‰æ‹©å™¨ç­–ç•¥
- **å†…ç½®é€‰æ‹©å™¨**: 11ä¸ªéªŒè¯ç å›¾ç‰‡é€‰æ‹©å™¨ + 6ä¸ªè¾“å…¥æ¡†é€‰æ‹©å™¨
- **è‡ªå®šä¹‰é€‰æ‹©å™¨**: ç”¨æˆ·å¯æ·»åŠ ç‰¹å®šç½‘ç«™çš„é€‰æ‹©å™¨
- **äº‘ç«¯è§„åˆ™**: é€šè¿‡ rules.json è¿œç¨‹é…ç½®

#### æ™ºèƒ½å…ƒç´ è¯†åˆ«
```javascript
// æ”¯æŒçš„å…ƒç´ ç±»å‹
- <img> æ ‡ç­¾å›¾ç‰‡
- <canvas> ç”»å¸ƒå…ƒç´ 
- è·¨åŸŸå›¾ç‰‡è‡ªåŠ¨å¤„ç†
```

#### å››çº§è¾“å…¥æ¡†æŸ¥æ‰¾ç®—æ³•
1. **çˆ¶å…ƒç´ æŸ¥æ‰¾** - åœ¨éªŒè¯ç å›¾ç‰‡çš„çˆ¶å…ƒç´ ä¸­æŸ¥æ‰¾
2. **è¡¨å•æŸ¥æ‰¾** - å‘ä¸ŠæŸ¥æ‰¾è¡¨å•å…ƒç´ 
3. **æ–‡æ¡£æŸ¥æ‰¾** - åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­æŸ¥æ‰¾
4. **é€šç”¨æŸ¥æ‰¾** - ä½¿ç”¨æ¨¡ç³ŠåŒ¹é…ç­–ç•¥

### 2. AIè¯†åˆ«å¼•æ“

#### æ”¯æŒçš„AIæœåŠ¡å•†

| æœåŠ¡å•† | é»˜è®¤æ¨¡å‹ | ç‰¹ç‚¹ |
|--------|----------|------|
| OpenAI | gpt-4.1-mini | è¯†åˆ«å‡†ç¡®ç‡é«˜ |
| Google Gemini | gemini-2.5-flash-lite | é€Ÿåº¦å¿«ï¼Œç¨³å®šæ€§å¥½ |
| é˜¿é‡Œäº‘é€šä¹‰åƒé—® | qwen-vl-max | ä¸­æ–‡éªŒè¯ç è¯†åˆ«ä¼˜ç§€ |

#### å›¾åƒå¤„ç†æµç¨‹
```
éªŒè¯ç å›¾ç‰‡ â†’ Base64ç¼–ç  â†’ AIè¯†åˆ« â†’ ç»“æœå¤„ç† â†’ è‡ªåŠ¨å¡«å……
```

#### æ™ºèƒ½æç¤ºè¯ç³»ç»Ÿ
- ä¸“ä¸šçš„éªŒè¯ç è¯†åˆ«æç¤ºè¯
- æ”¯æŒå­—ç¬¦è¯†åˆ«å’Œæ•°å­¦è®¡ç®—
- å¯è‡ªå®šä¹‰æç¤ºè¯ä¼˜åŒ–è¯†åˆ«æ•ˆæœ

### 3. è‡ªåŠ¨åŒ–åŠŸèƒ½

- âœ… **è‡ªåŠ¨è¯†åˆ«** - æ£€æµ‹åˆ°éªŒè¯ç å˜åŒ–æ—¶è‡ªåŠ¨è§¦å‘
- âœ… **è‡ªåŠ¨å¡«å……** - è¯†åˆ«æˆåŠŸåè‡ªåŠ¨å¡«å……è¾“å…¥æ¡†
- âœ… **å‰ªè´´æ¿å¤åˆ¶** - è‡ªåŠ¨å¤åˆ¶è¯†åˆ«ç»“æœ
- âœ… **å®æ—¶ç›‘æ§** - MutationObserverç›‘å¬DOMå˜åŒ–

### 4. è§„åˆ™ç®¡ç†ç³»ç»Ÿ

#### è§„åˆ™é…ç½®æ ¼å¼
```json
{
  "url_pattern": "example.com",           // URLåŒ¹é…æ¨¡å¼
  "captcha_image_selector": "img.captcha", // éªŒè¯ç é€‰æ‹©å™¨
  "captcha_input_selector": "input#code"   // è¾“å…¥æ¡†é€‰æ‹©å™¨
}
```

#### URLåŒ¹é…æ¨¡å¼
- **ç²¾ç¡®åŒ¹é…**: `"example.com"`
- **é€šé…ç¬¦**: `"*.example.org"`
- **æ­£åˆ™è¡¨è¾¾å¼**: `"/^https:\/\/.*\.com$/"`
- **å…¨å±€åŒ¹é…**: `"*"` æˆ–ç•™ç©º

### 5. ç”¨æˆ·ç•Œé¢

#### è®¾ç½®é¢æ¿ç»“æ„
- **AIæœåŠ¡å•†è®¾ç½®** - APIå¯†é’¥ã€æ¨¡å‹ã€ç«¯ç‚¹é…ç½®
- **åŠŸèƒ½è®¾ç½®** - è‡ªåŠ¨è¯†åˆ«ã€å‰ªè´´æ¿ã€é€šçŸ¥å¼€å…³
- **ç¦ç”¨åŸŸå** - è®¾ç½®ä¸å¯ç”¨è¯†åˆ«çš„ç½‘ç«™
- **é«˜çº§è®¾ç½®** - è‡ªå®šä¹‰é€‰æ‹©å™¨ã€è§„åˆ™ç®¡ç†

#### UIç‰¹æ€§
- å“åº”å¼è®¾è®¡ï¼Œé€‚é…ä¸åŒå±å¹•
- å³ä¾§æ»‘å‡ºå¼é¢æ¿
- Toastæ¶ˆæ¯æç¤º
- APIè¿é€šæ€§æµ‹è¯•

## ğŸ’» æ ¸å¿ƒå®ç°

### å…³é”®æ–¹æ³•è¯´æ˜

| æ–¹æ³•å | åŠŸèƒ½ | ä½ç½® |
|--------|------|------|
| `detectCaptchas()` | æ£€æµ‹é¡µé¢éªŒè¯ç  | [app.vue:1149](src/app.vue) |
| `addRecognitionIcon()` | æ·»åŠ è¯†åˆ«æŒ‰é’® | [app.vue:2243](src/app.vue) |
| `imageToBase64()` | å›¾ç‰‡è½¬Base64 | [app.vue:811](src/app.vue) |
| `recognizeCaptcha()` | AIè¯†åˆ«éªŒè¯ç  | [app.vue:737](src/app.vue) |
| `processCaptcha()` | å¤„ç†è¯†åˆ«ç»“æœ | [app.vue:1410](src/app.vue) |
| `findInputFieldForCaptcha()` | æŸ¥æ‰¾è¾“å…¥æ¡† | [app.vue:2415](src/app.vue) |

### éªŒè¯ç è¯†åˆ«æµç¨‹

```mermaid
graph LR
    A[é¡µé¢åŠ è½½] --> B[åˆå§‹åŒ–æ’ä»¶]
    B --> C[æ£€æµ‹éªŒè¯ç ]
    C --> D[æ·»åŠ è¯†åˆ«å›¾æ ‡]
    D --> E[ç”¨æˆ·ç‚¹å‡»/è‡ªåŠ¨è§¦å‘]
    E --> F[å›¾ç‰‡è½¬Base64]
    F --> G[è°ƒç”¨AIæœåŠ¡]
    G --> H[è·å–è¯†åˆ«ç»“æœ]
    H --> I[å¡«å……åˆ°è¾“å…¥æ¡†]
    I --> J[å¤åˆ¶åˆ°å‰ªè´´æ¿]
```

### è·¨åŸŸå¤„ç†æœºåˆ¶

```javascript
// è‡ªåŠ¨å¤„ç†è·¨åŸŸå›¾ç‰‡
if (!imgSrc.startsWith("data:image") && !this.isSameOrigin(imgSrc)) {
  element.crossOrigin = "anonymous";
  element.src = `${imgSrc}?_t=${timestamp}`;
}
```

## ğŸ”§ é…ç½®ç®¡ç†

### å­˜å‚¨æ–¹æ¡ˆ

| ç¯å¢ƒ | å­˜å‚¨æ–¹å¼ | API |
|------|----------|-----|
| æ²¹çŒ´ç¯å¢ƒ | è„šæœ¬å­˜å‚¨ | `GM_getValue`/`GM_setValue` |
| å¼€å‘ç¯å¢ƒ | æœ¬åœ°å­˜å‚¨ | `localStorage` |

### é…ç½®é¡¹è¯´æ˜

```javascript
settings: {
  // AIæœåŠ¡é…ç½®
  apiType: "openai",              // APIç±»å‹
  openaiKey: "",                  // OpenAIå¯†é’¥
  openaiApiUrl: "",               // è‡ªå®šä¹‰APIåœ°å€
  openaiModel: "",                // æ¨¡å‹åç§°
  openaiPrompt: "",               // è‡ªå®šä¹‰æç¤ºè¯
  
  // åŠŸèƒ½å¼€å…³
  autoRecognize: false,           // è‡ªåŠ¨è¯†åˆ«
  copyToClipboard: true,          // è‡ªåŠ¨å¤åˆ¶
  showNotification: true,         // æ˜¾ç¤ºé€šçŸ¥
  autoFetchCloudRules: false,     // è‡ªåŠ¨è·å–äº‘ç«¯è§„åˆ™
  
  // é«˜çº§è®¾ç½®
  customCaptchaSelectors: [],     // è‡ªå®šä¹‰éªŒè¯ç é€‰æ‹©å™¨
  customInputSelectors: [],       // è‡ªå®šä¹‰è¾“å…¥æ¡†é€‰æ‹©å™¨
  disabledDomains: "",           // ç¦ç”¨åŸŸååˆ—è¡¨
  rulesUrl: ""                   // è§„åˆ™æ–‡ä»¶URL
}
```

## ğŸš¦ å®‰è£…ä½¿ç”¨

### å‰ç½®è¦æ±‚

1. å®‰è£…æ²¹çŒ´æ‰©å±•ï¼ˆTampermonkey æˆ– Violentmonkeyï¼‰
2. è·å–AIæœåŠ¡APIå¯†é’¥ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰

### å®‰è£…æ­¥éª¤

1. **å®‰è£…è„šæœ¬**
   - ä» Greasyfork å®‰è£…ï¼ˆæ¨èï¼‰
   - æˆ–ä» GitHub å®‰è£…å¼€å‘ç‰ˆ

2. **é…ç½®API**
   - è¿›å…¥ä»»æ„æœ‰éªŒè¯ç çš„ç½‘é¡µ
   - ç‚¹å‡»éªŒè¯ç æ—çš„è¯†åˆ«å›¾æ ‡
   - åœ¨è®¾ç½®é¢æ¿ä¸­é…ç½®APIå¯†é’¥

3. **å¼€å§‹ä½¿ç”¨**
   - æ‰‹åŠ¨ç‚¹å‡»è¯†åˆ«å›¾æ ‡
   - æˆ–å¼€å¯è‡ªåŠ¨è¯†åˆ«åŠŸèƒ½

## ğŸ”¨ å¼€å‘æŒ‡å—

### ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/anghunk/UserScript.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd CAPTCHA-automatic-recognition

# å®‰è£…ä¾èµ–
yarn install
# æˆ–
npm install
```

### å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
yarn dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
yarn build

# é¢„è§ˆæ„å»ºç»“æœ
yarn preview
```

### æ„å»ºé…ç½®

```javascript
// vite.config.js å…³é”®é…ç½®
{
  plugins: [
    vue(),
    monkey({
      entry: 'src/main.js',
      userscript: {
        match: ['*://*/*'],
        grant: [
          'GM_xmlhttpRequest',
          'GM_setValue',
          'GM_getValue',
          'GM_registerMenuCommand'
        ]
      },
      build: {
        externalGlobals: {
          vue: cdn.unpkg('Vue', 'dist/vue.global.prod.js')
        },
        minify: false  // ä¸æ··æ·†ä»£ç 
      }
    })
  ]
}
```

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### ä¼˜åŒ–ç­–ç•¥

1. **é˜²æŠ–å¤„ç†** - 500mså»¶è¿Ÿé¿å…é¢‘ç¹è§¦å‘
2. **é€‰æ‹©å™¨ç¼“å­˜** - å‡å°‘DOMæŸ¥è¯¢
3. **å›¾åƒé¢„æ£€æµ‹** - æå‰æ£€æŸ¥å›¾ç‰‡å¯è¯†åˆ«æ€§
4. **å¼‚æ­¥å¤„ç†** - ä¸é˜»å¡ä¸»çº¿ç¨‹

### å…¼å®¹æ€§å¤„ç†

- ç‰¹æ®Šç½‘ç«™é€‚é…ï¼ˆnportal.ntut.edu.twã€www.luogu.com.cnï¼‰
- æ ·å¼éš”ç¦»ï¼ˆä½¿ç”¨ `!important` ç¡®ä¿ä¼˜å…ˆçº§ï¼‰
- é™çº§å¤„ç†ç­–ç•¥

## ğŸ“Š ç‰ˆæœ¬å†å²

### v1.2.0 (æœ€æ–°ç‰ˆ)
- âœ¨ æ–°å¢æ¯æ—¥è‡ªåŠ¨è·å–äº‘ç«¯è§„åˆ™åŠŸèƒ½
- ğŸ¨ é‡æ„é…ç½®é¢æ¿ï¼Œæå‡å…¼å®¹æ€§

### v1.1.x ç³»åˆ—
- ğŸ”§ CanvaséªŒè¯ç æ”¯æŒ
- ğŸŒ äº‘ç«¯è§„åˆ™ç³»ç»Ÿ
- ğŸ¤– å¤šAIæœåŠ¡å•†æ”¯æŒ

### v1.0.x ç³»åˆ—
- ğŸš€ åŸºç¡€åŠŸèƒ½å®ç°
- ğŸ“± UIç•Œé¢ä¼˜åŒ–
- ğŸ› å…¼å®¹æ€§ä¿®å¤

[æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—](version-log.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¦‚ä½•è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

### é—®é¢˜åé¦ˆ

- åœ¨ [GitHub Issues](https://github.com/anghunk/UserScript/issues) æäº¤é—®é¢˜
- æä¾›ç½‘ç«™åŸŸåå’Œé”™è¯¯ä¿¡æ¯
- é™„ä¸Šæ§åˆ¶å°æˆªå›¾ï¼ˆå¦‚æœ‰ï¼‰

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº Apache-2.0 è®¸å¯è¯å¼€æºï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## âš ï¸ å…è´£å£°æ˜

1. æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨
2. è¯·éµå®ˆç›¸å…³ç½‘ç«™çš„æœåŠ¡æ¡æ¬¾
3. ä¸å¾—ç”¨äºéæ³•ç”¨é€”
4. ä½œè€…ä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/anghunk/UserScript/tree/main/CAPTCHA-automatic-recognition)
- [Greasyfork è„šæœ¬é¡µ](https://greasyfork.org/scripts/540822)
- [é«˜çº§è®¾ç½®æ•™ç¨‹](docs/advanced-settings.md)
- [é—®é¢˜åé¦ˆ](https://github.com/anghunk/UserScript/issues)

## ğŸ‘¨â€ğŸ’» ä½œè€…

**anghunk**
- GitHub: [@anghunk](https://github.com/anghunk)

---

<div align="center">
  <sub>å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼</sub>
</div>